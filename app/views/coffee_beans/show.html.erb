<h1 class="title"><%= @coffee_bean.brand.present? ? @coffee_bean.brand : "Coffee Bean ##{@coffee_bean.id}" %></h1>

<% if @coffee_bean.images.attached? %>
  <div class="flex gap-2">
    <% @coffee_bean.images.each do |image| %>
      <%= image_tag image, class: "h-48 w-48 object-cover rounded" %>
    <% end %>
  </div>
<% end %>

<table>
  <tr>
    <td><strong>Brand:</strong></td>
    <td><%= @coffee_bean.brand %></td>
  </tr>
  <tr>
    <td><strong>Origin:</strong></td>
    <td><%= @coffee_bean.origin %></td>
  </tr>
  <tr>
    <td><strong>Variety:</strong></td>
    <td><%= @coffee_bean.variety %></td>
  </tr>
  <tr>
    <td><strong>Process:</strong></td>
    <td><%= @coffee_bean.process %></td>
  </tr>
  <tr>
    <td><strong>Tasting Notes:</strong></td>
    <td><%= @coffee_bean.tasting_notes %></td>
  </tr>
  <tr>
    <td><strong>Producer:</strong></td>
    <td><%= @coffee_bean.producer %></td>
  </tr>
  <tr>
    <td><strong>Notes:</strong></td>
    <td><%= simple_format(@coffee_bean.notes) %></td>
  </tr>
</table>

<% if @coffee_bean.aeropress_recipes.any? %>
  <div>
    <h2 class="font-bold text-xl">AeroPress Recipes</h2>
    <ul class="gap-2 flex flex-col">
      <% @coffee_bean.aeropress_recipes.each do |recipe| %>
        <li>
          <%= link_to coffee_bean_aeropress_recipe_path(@coffee_bean, recipe), class: "card font-semibold text-lg px-4 py-2" do %>
            <%= recipe.name.present? ? recipe.name : "Recipe ##{recipe.id}" %>
            <% if recipe.name.blank? %>
              <em>(generating...)</em>
            <% end %>
          <% end %>
        </li>
      <% end %>
    </ul>
  </div>
<% end %>

<div>
  <h2 class="font-bold text-xl">Create AeroPress Recipe</h2>
  <%= form_with model: [@coffee_bean, AeropressRecipe.new], local: true do |form| %>
    <div class="flex flex-col mb-4 gap-2">
      <%= form.label :prompt, "Recipe Requirements", class: "input-label" %>
      <%= form.text_area :prompt, placeholder: "Describe your brewing preferences or specific requirements...", rows: 4, class: "text-input" %>
    </div>
    <div>
      <%= form.submit "Generate AeroPress Recipe", class: "button" %>
    </div>
  <% end %>
</div>

