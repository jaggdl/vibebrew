<%= turbo_stream_from "coffee_beans" %>

<div class="w-full flex justify-between items-center">
  <h1 class="title">Coffee beans</h1>
  <%= link_to '+ Add Coffee Bean', new_coffee_bean_path, class: "button" %>
</div>

<% if @rotations.any? %>
  <section class="mt-6">
    <h2 class="text-lg font-semibold text-gray-700 mb-3 flex items-center gap-2">
      <%= lucide_icon('coffee', class: 'h-5 w-5 text-green-600') %>
      In Rotation
    </h2>
    <div class="grid-custom">
      <% @rotations.each do |coffee_bean| %>
        <div>
          <%= render coffee_bean %>
          <div class="border rounded-lg border-gray-200 -mt-4 pt-4 border-t-0">
            <%= render "recipes/list", recipes: coffee_bean.favorite_recipes, title: nil %>
          </div>
        </div>
      <% end %>
    </div>
  </section>
<% end %>

<% if @favorites.any? %>
  <section class="mt-6">
    <h2 class="text-lg font-semibold text-gray-700 mb-3 flex items-center gap-2">
      <%= lucide_icon('heart', class: 'h-5 w-5 text-red-500') %>
      Favorites
    </h2>
    <div class="grid-custom">
      <%= render @favorites %>
    </div>
  </section>
<% end %>

<% if @others.any? %>
  <section class="mt-6">
    <% if @rotations.any? || @favorites.any? %>
      <h2 class="text-lg font-semibold text-gray-700 mb-3">All Beans</h2>
    <% end %>
    <div class="grid-custom">
      <%= render @others %>
    </div>
  </section>
<% end %>

